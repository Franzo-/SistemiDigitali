#+begin_src ditaa :file controller.png




  +------------+
  |            |     clock_FPGA
  |            <----------------------
  |    PLL     |
  |            |     clock_movimento
  |            +--------------------->
  |            |
  +------------+


  +---------------------------+
  |                           |    clock_movimento
  |                           <---------------------------
  |                           |    reset
  |   Pacman controller       <---------------------------
  |                           |    button (4 direzioni)
  |                           <---------------------------
  |                           |    can_moves (4)         
  |                           <---------------------------
  |                           |    enable            
  |                           <---------------------------
  |                           |    move_commands (4)
  |                           +-------------------------->
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     character_coordinates
  |                           <-----------------------------------
  |                           |     response (contenuto celle)
  |                           <-----------------------------------
  |    Collision detection    |
  |                           |
  |                           |
  | (per ogni personaggio)    |
  |                           |     query (sul contenuto celle)
  |                           +---------------------------------->
  |      (COMBINATORIO)       |     can_move (4 direzioni)
  |                           +---------------------------------->
  |                           |
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     characters_coordinates(5)
  |                           <-------------------------------------------
  |                           |     candy_left           
  |                           <-------------------------------------------
  |                           |
  |    Eating controller      |
  |                           |
  |                           |     win                               
  |                           +------------------------------------------>
  |                           |     game_over
  |                           +------------------------------------------>
  |                           |     remove_candy
  |                           +------------------------------------------>
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     can_move (4 direzioni)
  |                           <--------------------------------
  |                           |
  |    Intelligenza           |     clock_movimento
  |    fantasmini             <--------------------------------
  |                           |
  | (per ogni fantasmino)     |     enable
  |                           <--------------------------------
  |                           |     move (4 direzioni)
  |                           +------------------------------->
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     reset
  |                           <--------------------------------
  |                           |     pausa
  |                           <--------------------------------
  |                           |     input direzionali        
  |                           <--------------------------------
  |    Automa a stati         |     game_over
  |                           <--------------------------------
  |                           |     win
  |                           <--------------------------------
  |                           |
  |                           |     current_state 
  |                           +------------------------------->
  |                           |     enable_controller                        
  |                           +------------------------------->
  |                           |
  +---------------------------+

#+end_src

#+RESULTS:
[[file:controller.png]]


#+begin_src ditaa :file model.png




  +--------------------------------------------------+
  |                                                  |      query_nearby(5)
  |                                                  <----------------------------------
  |                  Mappa                           |
  |                                                  |
  |                                                  |      query_view
  |    +-------------------+           |             <----------------------------------
  |    |                   |           |             |
  |    |                   |    enable |             |      remove_candy
  |    |   CandyCounter    <-----------+             <----------------------------------
  |    |                   |                         |                                  
  |    |                   |    count                |       candy_left
  |    |                   +------------------------->---------------------------------->
  |    |                   |                         |
  |    |                   |                         |       response_nearby(5)
  |    |                   |    reset_n              +---------------------------------->
  |    |                   <--------------------+    |
  |    |                   |                    |    |
  |    +-------------------+                    |    |       response_view
  |                                             |    +---------------------------------->
  |                                             |    |
  |                                             |    |
  |                                             |    |
  |                                             |    |
  |                                             |    |          reset_n
  |                                             +----<------------------------------------
  |                                                  |
  +--------------------------------------------------+






  +---------+
  |         |   move_commands(5)   
  |  Parti  <-------------------------------
  |  mobili |   characters_coordinates(5)
  |         +------------------------------>
  |         |
  +---------+




















#+end_src

#+RESULTS:
[[file:model.png]]

