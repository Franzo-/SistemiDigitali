#+begin_src ditaa :file controller.png




  +------------+
  |            |     clock_FPGA
  |            <----------------------
  |    PLL     |
  |            |     clock_movimento
  |            +--------------------->
  |            |
  +------------+


  +---------------------------+
  |                           |    clock_movimento
  |                           <---------------------------
  |                           |    reset
  |   Pacman controller       <---------------------------
  |                           |    button (4 direzioni)
  |                           <---------------------------
  |                           |    can_move (4 direzioni)
  |                           <---------------------------
  |                           |    move (4 direzioni)
  |                           +-------------------------->
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     character_coordinates
  |                           <-----------------------------------
  |                           |     response (contenuto celle)
  |                           <-----------------------------------
  |    Collision detection    |
  |                           |
  |                           |
  | (per ogni personaggio)    |
  |                           |     query (sul contenuto celle)
  |                           +---------------------------------->
  |      (COMBINATORIO)       |     can_move (4 direzioni)
  |                           +---------------------------------->
  |                           |
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     coordinate pacman
  |                           <-------------------------------------------
  |                           |     coordinate fantasmini
  |                           <-------------------------------------------
  |                           |     response_candy (presenza caramellina)
  |    Eating controller      +-------------------------------------------
  |                           |
  |                           |     query_candy (presenza caramellina)
  |                           +------------------------------------------>
  |                           |     game_over
  |                           +------------------------------------------>
  |                           |     remove_candy
  |                           +------------------------------------------>
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |    caramellina mangiata
  |                           <--------------------------------
  |                           |
  |    Aggiornamento          |
  |    punteggio              |    candy_counter_enable
  |                           +------------------------------->
  |                           |    remove_candy (??)
  | (dentro a eating          +------------------------------->
  |   controller??)           |    win
  |                           +------------------------------->
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     can_move (4 direzioni)
  |                           <--------------------------------
  |                           |
  |    Intelligenza           |     clock_movimento
  |    fantasmini             <--------------------------------
  |                           |
  |                           |     move (4 direzioni)
  |  (una per ogni            +------------------------------->
  |    fantasmino??)          |
  |                           |
  +---------------------------+

  +---------------------------+
  |                           |     reset
  |                           <--------------------------------
  |                           |     pausa
  |                           <--------------------------------
  |                           |     start (input direzionale)
  |                           <--------------------------------
  |    Automa a stati         |     game_over
  |                           <--------------------------------
  |                           |     win
  |                           <--------------------------------
  |                           |
  |                           |     stringa di stato
  |                           +------------------------------->
  |                           |     reset posizioni e mappa (serve davvero??)
  |                           +---------------------------------------------->
  |                           |
  +---------------------------+

#+end_src

#+RESULTS:
[[file:controller.png]]


#+begin_src ditaa :file model.png




  +--------------------------------------------------+
  |                                                  |      query_nearby(5)
  |                                                  <----------------------------------
  |                  Mappa                           |      query_candy
  |                                                  <----------------------------------
  |                                                  |      query_view
  |    +-------------------+           |             <----------------------------------
  |    |                   |           |             |
  |    |                   |    enable |             |      remove_candy
  |    |   CandyCounter    <-----------+             <----------------------------------
  |    |                   |                         |                                  
  |    |                   |    count                |       candy_left
  |    |                   +------------------------->---------------------------------->
  |    |                   |                         |
  |    |                   |                         |       response_nearby(5)
  |    |                   |    reset_n              +---------------------------------->
  |    |                   <--------------------+    |       response_candy
  |    |                   |                    |    +---------------------------------->
  |    +-------------------+                    |    |       response_view
  |                                             |    +---------------------------------->
  |                                             |    |
  |                                             |    |
  |                                             |    |
  |                                             |    |
  |                                             |    |          reset_n
  |                                             +----<------------------------------------
  |                                                  |
  +--------------------------------------------------+






  +---------+
  |         |   move_direzionali(5)
  |  Parti  <------------------------
  |  mobili |     coordinate(5)
  |         +----------------------->
  |         |
  +---------+




















#+end_src

#+RESULTS:
[[file:model.png]]

